# Описание
Проект YaMDb представляет собой API, который собирает отзывы пользователей на произведения. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку. Произведения делятся на категории, такие как «Книги», «Фильмы», «Музыка». Произведению может быть присвоен жанр из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Добавлять произведения, категории и жанры может только администратор.
Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.
Пользователи могут оставлять комментарии к отзывам.
Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.

# Алгоритм регистрации пользователей
1. Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами email и username на эндпоинт /api/v1/auth/signup/.
YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.
2. Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).
3. При желании пользователь отправляет PATCH-запрос на эндпоинт /api/v1/users/me/ и заполняет поля в своём профайле (описание полей — в документации).
# Пользовательские роли
Аноним — может просматривать описания произведений, читать отзывы и комментарии.
Аутентифицированный пользователь (user) — может, как и Аноним, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.
Модератор (moderator) — те же права, что и у Аутентифицированного пользователя плюс право удалять любые отзывы и комментарии.
Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
Суперюзер Django — обладет правами администратора (admin)

# Установка
Как запустить проект:
### 1. Клонировать репозиторий и перейти в него в командной строке:
```
git clone https://github.com/Scorcer777/api_yamdb/edit/
cd api_yamdb
```
### 2. Cоздать и активировать виртуальное окружение:
```
python3 -m venv env
source venv/Scripts/activate
```
### 3.Установить зависимости из файла requirements.txt:
```
python3 -m pip install --upgrade pip
pip install -r requirements.txt
```
Выполнить миграции:
```
python3 manage.py migrate
```
Опциональлно можно также импортировать в базу данные, подготовленные для демонстрации работы API:
```
python3 manage.py import
```
### 4. Запустить проект:
```
python3 manage.py runserver
```
# Примеры запросов
## 1. Регистрация пользователя и получение confirmation code.
Для регистрации в системе и получения confirmation code необходимо отправить POST-запрос на URL-адрес http://127.0.0.1:8000/api/v1/auth/signup/ с почтовым адресом и именем пользователя в формате JSON:
```
{
"email": "user@example.com",
"username": "string"
}
```
Ответ со статусом 200 придет в виде:
```
{
"email": "user@example.com",
"username": "string"
}
```

На указанный адрес email будет отправлен confirmation_code, который необходимо отправить со следующим POST-запросом на URL- адрес http://127.0.0.1:8000/api/v1/auth/token/ для получения токена:
```
{
"username": "string",
"confirmation_code": "string"
}
```
Ответ с токеном и статусом 200 придет в виде:
```
{
"token": "string"
}
```
Для выполнения ряда действий с API, таких как размещение отзыва к произведению или комментария к отзыву, требуется аутентификация. Для аутентификации при отправке запроса необходимо в заголовке запроса Authorization отправить значение вида: Bearer <номер_токена>.

## 2. Запросы на получение информации, не требующие аутентификации.
### Отправить GET-запрос URL http://127.0.0.1:8000/api/v1/titles/ - **получение списка произведений**
### Отправить GET-запрос URL http://127.0.0.1:8000/api/v1/titles/{title_id}/ - **получение одного произведения**.
### Отправить GET-запрос URL http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/ - **получение списка отзывов к указанному произведению**;
### Отправить GET-запрос URL http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/ - **получение одного отзывова к указанному произведению**;
### Отправить GET-запрос URL http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/comments/ - **получение списка комментариев к указанным произведению и отзыву**;
### Отправить GET-запрос URL http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/comments/{comment_id}/ - **получение одного комментария к указанным произведению и отзыву**.

### где {title_id}, {review_id}, {comment_id} - целые числа.

Пример ответа на запрос о получении списка произведений:
```
{
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 1,
            "name": "Побег из Шоушенка",
            "year": 1994,
            "rating": 10,
            "description": "",
            "genre": [
                {
                    "name": "Драма",
                    "slug": "drama"
                }
            ],
            "category": {
                "name": "Фильм",
                "slug": "movie"
            }
        },
        {
            "id": 2,
            "name": "Крестный отец",
            "year": 1972,
            "rating": 4,
            "description": "",
            "genre": [
                {
                    "name": "Драма",
                    "slug": "drama"
                }
}
```

http://127.0.0.1:8000/posts/ (опционально можно указать параметры выдачи, offset - ID поста, которого начинается отображение, limit - количество постов на страницу. http://127.0.0.1:8000/posts/?offset=x&limit=y)
http://127.0.0.1:8000/posts/{id}/
http://127.0.0.1:8000/posts/{id}/comments/
http://127.0.0.1:8000/groups/
http://127.0.0.1:8000/groups/{id}/
http://127.0.0.1:8000/groups/
Пример успешного ответа: Status 200 OK.

[
    {
        "id": 1,
        "text": "Richard",
        "pub_date": "2023-08-17T17:08:27.187812Z",
        "author": "Scorcer777",
        "image": "http://127.0.0.1:8000/posts/temp_faHPqGK.jpeg",
        "group": 1
    },
    {
        "id": 2,
        "text": "Pas dobar",
        "pub_date": "2023-08-17T17:13:33.030814Z",
        "author": "Scorcer777",
        "image": "http://127.0.0.1:8000/posts/pictures/temp.jpeg",
        "group": null
    },
]
Создание поста, комментария.
Создние поста: Отправить POST запрос URL http://127.0.0.1:8000/posts/

{
     "text": "Richard.", **(обязательное поле)**
     "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEsCAIAAABi1XKVAAAAGXRFWH"
     "group": 1
}
Пример успешного ответа: Status 201 Created.

{
     "id": 1,
     "text": "Richard",
     "pub_date": "2023-08-17T17:08:27.187812Z",
     "author": "Scorcer777",
     "image": "http://127.0.0.1:8000/posts/temp_faHPqGK.jpeg",
     "group": 1
}
Создние комментария: Отправить POST запрос URL http://127.0.0.1:8000/posts/{id}/

    {
        "text": "Комментарий аутентифицированного пользователя.", **(обязательное поле)**
    },
Пример успешного ответа: Status 201 Created.

{
   "id": 1,
   "author": "Scorcer777",
   "text": "Комментарий аутентифицированного пользователя.",
   "created": "2023-08-17T17:43:12.112108Z",
   "post": 1
}
Документация с описанием всех эндпоинтов и запросов доспупна по адресу:

http://127.0.0.1:8000/redoc/
Отркывать при запущенном локально сервере.
